# Library Book Manager

## Описание задачи
Система управления библиотекой с поддержкой поиска и сортировки книг, а также базовой системой управления пользователями и возможностью выдачи/возврата книг. Проект реализован на Java, структурирован по промышленным стандартам (Maven, разбиение на пакеты по ответственности). Ключевые алгоритмические компоненты — собственная реализация хеш-таблицы для хранения книг и пользователей, различные алгоритмы сортировки и бинарный поиск.

## Архитектура
- **model**: классы предметной области (Book, User)
- **service**: бизнес-логика (LibraryService)
- **utils**: алгоритмические структуры (MyHashTable, MySorts)
- **app**: точка входа (LibraryApp)

## Ключевые алгоритмы
В проекте реализованы следующие алгоритмические компоненты:
- **Хеш-таблица (`MyHashTable<K,V>`)**: собственная реализация хеш-таблицы, поддерживающая методы `put`, `get`, `remove`, `values`, `resize`. Используется для хранения книг и пользователей.
- **Алгоритмы сортировки (`MySorts`)**: содержит собственные реализации алгоритмов сортировки, таких как **пузырьковая сортировка** (`bubbleSort`) и **сортировка слиянием** (`mergeSort`). Дополнительно, **сортировка вставками** реализована непосредственно в `LibraryService`.
- **Бинарный поиск**: реализован в `LibraryService` для точного поиска книги по названию. Для его корректной работы список книг сначала сортируется с использованием `mergeSort`.

Для хранения книг и пользователей не используются стандартные `HashMap` или встроенные методы сортировки Java для ключевых алгоритмов, за исключением встроенной сортировки, которая доступна как опция для сравнения производительности.

## Консольное приложение
Приложение предоставляет интуитивно понятный консольный интерфейс с:
- Красивым оформлением с использованием Unicode-символов
- Предустановленными образцами книг для демонстрации
- Валидацией пользовательского ввода
- Системой аутентификации пользователей
- Множественными алгоритмами сортировки
- Различными методами поиска (подстроки и бинарный)
- Системой выдачи и возврата книг

### Функциональность
1. **Регистрация и вход пользователей**
2. **Добавление новых книг** с валидацией данных
3. **Поиск книг** по подстроке (в названии, авторе, годе)
4. **Сортировка книг** по названию, автору или году с выбором алгоритма:
   - Пузырьковая сортировка
   - Сортировка слиянием
   - Сортировка вставками
   - Встроенная сортировка Java
5. **Бинарный поиск** для точного поиска по названию
6. **Выдача и возврат книг** с проверкой прав доступа

## Сборка и запуск
1. Убедитесь, что установлен JDK 11+ и Maven.
2. Сборка: 
   ```
   mvn clean package
   ```
3. Запуск:
   ```
   mvn exec:java -Dexec.mainClass="org.example.Main"
   ```
   или
   ```
   java -cp target/classes org.example.Main
   ```

## Тестирование

### Базовые тесты
Для запуска всех тестов:
```
mvn test
```

### Стресс-тесты
Проект включает комплексные стресс-тесты для проверки производительности и стабильности:

#### MyHashTableStressTest
- **testLargeDataSetInsertion**: Тест вставки 10,000 элементов
- **testLargeDataSetWithBooks**: Тест работы с 5,000 книг
- **testConcurrentAccessPattern**: Симуляция множественных операций
- **testHashCollisionStress**: Тест обработки коллизий хешей
- **testRandomAccessPattern**: Случайные операции доступа
- **testMemoryEfficiency**: Тест эффективности памяти
- **testNullKeyHandling**: Обработка null-ключей
- **testEmptyTableOperations**: Операции с пустой таблицей

#### MySortsStressTest
- **testBubbleSortLargeDataSet**: Сортировка 1,000 элементов пузырьком
- **testMergeSortLargeDataSet**: Сортировка 5,000 элементов слиянием
- **testSortingPerformanceComparison**: Сравнение производительности алгоритмов
- **testSortingWithDuplicates**: Сортировка с дубликатами
- **testSortingAlreadySortedList**: Сортировка уже отсортированного списка
- **testSortingReverseSortedList**: Сортировка списка в обратном порядке
- **testSortingWithComplexComparator**: Сложные компараторы
- **testSortingEmptyList**: Сортировка пустого списка

#### LibraryServiceStressTest
- **testLargeBookCollectionOperations**: Операции с 5,000 книг
- **testBinarySearchPerformance**: Производительность бинарного поиска
- **testUserManagementStress**: Управление 2,000 пользователей
- **testBookBorrowingStress**: Множественные операции выдачи/возврата
- **testSortingAlgorithmsStress**: Тест всех алгоритмов сортировки
- **testSearchPerformance**: Производительность поиска
- **testConcurrentUserSessions**: Множественные сессии пользователей
- **testEdgeCases**: Граничные случаи
- **testMemoryEfficiency**: Эффективность памяти
- **testMixedOperationsStress**: Смешанные операции

#### BinarySearchStressTest
- **testBinarySearchLargeDataset**: Бинарный поиск в 10,000 книгах
- **testBinarySearchNonExistentBooks**: Поиск несуществующих книг
- **testBinarySearchEdgeCases**: Граничные случаи поиска
- **testBinarySearchCaseInsensitive**: Поиск без учета регистра
- **testBinarySearchPerformanceComparison**: Сравнение с линейным поиском
- **testBinarySearchWithDuplicates**: Поиск с дубликатами
- **testBinarySearchEmptyLibrary**: Поиск в пустой библиотеке
- **testBinarySearchSingleBook**: Поиск с одной книгой
- **testBinarySearchStressWithMixedOperations**: Смешанные операции

### Запуск стресс-тестов
```
mvn test -Dtest="*StressTest"
```

## Обработка ошибок
- Проверяются граничные случаи (пустой ввод, несуществующие книги/пользователи, некорректный ввод года).
- Ввод пользователя валидируется с понятными сообщениями об ошибках.
- Обрабатываются ситуации, когда книга уже выдана или пользователь пытается вернуть чужую книгу.
- Все стресс-тесты имеют таймауты для предотвращения зависания.

## Производительность
- **Хеш-таблица**: O(1) среднее время для вставки, поиска и удаления
- **Бинарный поиск**: O(log n) время поиска
- **Сортировка слиянием**: O(n log n) время сортировки
- **Пузырьковая сортировка**: O(n²) время сортировки
- **Сортировка вставками**: O(n²) время сортировки

## Автор
Реализация: алгоритмы, структура, тесты — AI + пользователь. 
